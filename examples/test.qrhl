isabelle.

classical var x : bit.
classical var y : bit.
classical var a : bit.
classical var b : bit.
classical var z : bit*bit.

program s1(zz) := {
  (x,y) <$ uniform UNIV;
  call zz;
}.

program s3 := {
  x <$ uniform UNIV;
}.

program s2 := {
  z <$ uniform UNIV;
  call s1(s3);
}.

qrhl {top} call s1(s2); ~ call s2; {Cla[(x2,y2)=(x1,y1)]}.
inline s1.
inline s2.
inline s1.
inline s3.

rnd.
simp.
rnd.
simp.
rnd.
simp.
wp left.
simp.
skip.
simp.

qed.



# Bad error message
program s1(x) := {
  (x,y) <$ uniform UNIV;
  call x;
}.
