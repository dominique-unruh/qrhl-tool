isabelle.

classical var x : int.
classical var y : int.
classical var b : bit.

quantum var Q : bit.
quantum var R : bit.

program p1 := {
  b <- measure R with computational_basis;
  Q <q ket 1;
  y <- x+1;
}.

qrhl {⟦R1⟧ =⇩q ket 0} call p1; ~ call p1; {top}.
  inline p1.
  
  sp left.
    simp!.
    simp!.
    simp!.

  simp SUP_UNIV_bit_expand.
  
  sp right.
    simp!.
    simp!.
    simp!.
  
  sp left.
    simp!.
    simp!.

  sp right.
    simp!.
    simp!.

  sp left.
    simp!.

  sp right.
    simp!.

  skip.
  simp!.
qed.
