isabelle.

classical var x : int.
classical var y : int.
classical var b : bit.

quantum var Q : bit.
quantum var R : bit.

program p1 := {
  b <- measure Q with computational_basis;
  x <- y+1;
}.


program p2 := {
  on Q apply hadamard;
}.

qrhl {undefined} call p1; call p2; ~ skip; {undefined}.
  inline p1.
  inline p2.
  swap left 1 2
    subprograms first: { b <- measure Q with computational_basis; } -> { b <- measure Q with undefined; }.
